
<!DOCTYPE html>
<html>
  <head>
    <title>Beego Framework Tutorials - 2 - Routing (part 3 of 3)</title>
    <meta charset='utf-8'>
    <script src='static/slides.js'></script>
  </head>

  <body style='display: none'>

    <section class='slides layout-widescreen'>
      
      <article>
        <h1>Beego Framework Tutorials - 2 - Routing (part 3 of 3)</h1>
        <h3>A Go HTTP framework for developing HTTP application rapidly</h3>
        
        
          <div class="presenter">
            
  
  <p>
    By Lei Cao
  </p>
  

          </div>
        
      </article>
      
  
  
      <article>
      
        <h3>Content</h3>
        
  <ul>
  
    <li>namespace</li>
  
    <li>How to plan and organize routers</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>namespace之示例</h3>
        
  
  <p>
    这个我主要是看了两个框架sintra和laravel的使用方式之后进行的设计和开发
  </p>
  

  
  <div class="code"><pre>ns := beego.NewNamespace(&#34;/v1&#34;).
    Filter(&#34;before&#34;, auth).
    Get(&#34;/notallowed&#34;, func(ctx *context.Context) {
        ctx.Output.Body([]byte(&#34;notAllowed&#34;))
    }).
    Router(&#34;/version&#34;, &amp;AdminController{}, &#34;get:ShowAPIVersion&#34;).
    Router(&#34;/changepassword&#34;, &amp;UserController{}).
    Namespace(
        beego.NewNamespace(&#34;/shop&#34;).
            Filter(&#34;before&#34;, sentry).
            Get(&#34;/:id&#34;, func(ctx *context.Context) {
                ctx.Output.Body([]byte(&#34;notAllowed&#34;))
        }),
    )</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>namespace之接口详解一</h3>
        
  <ul>
  
    <li>NewNamespace(prefix string)</li>
  
  </ul>

  
  <div class="code"><pre>初始化namespace对象,下面这些函数都是namespace对象的方法</pre></div>
  

  <ul>
  
    <li>Cond(cond namespaceCond)  </li>
  
  </ul>

  
  <div class="code"><pre>支持满足条件的就执行该namespace,不满足就不执行,例如你可以根据域名来控制namespace</pre></div>
  

  <ul>
  
    <li>Filter(action string, filter FilterFunc)</li>
  
  </ul>

  
  <div class="code"><pre>action表示你需要执行的位置,before和after分别表示执行逻辑之前和执行逻辑之后的filter</pre></div>
  

  <ul>
  
    <li>Router(rootpath string, c ControllerInterface, mappingMethods ...string)</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>namespace之接口详解二</h3>
        
  <ul>
  
    <li>AutoRouter(c ControllerInterface)</li>
  
    <li>AutoPrefix(prefix string, c ControllerInterface)</li>
  
    <li>Get(rootpath string, f FilterFunc)</li>
  
    <li>Post(rootpath string, f FilterFunc)</li>
  
    <li>Delete(rootpath string, f FilterFunc)</li>
  
    <li>Put(rootpath string, f FilterFunc)</li>
  
    <li>Head(rootpath string, f FilterFunc)</li>
  
    <li>Options(rootpath string, f FilterFunc)</li>
  
    <li>Patch(rootpath string, f FilterFunc)</li>
  
    <li>Any(rootpath string, f FilterFunc)</li>
  
    <li>Handler(rootpath string, h http.Handler)</li>
  
  </ul>

  
  <div class="code"><pre>上面这些都是设置路由的函数,详细的使用和前面beego的路由函数是一样的</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>namespace之接口详解三</h3>
        
  
  <p>
    嵌套其他namespace
  </p>
  

  <ul>
  
    <li>Namespace(ns *Namespace)</li>
  
  </ul>

  
  <div class="code"><pre>ns := beego.NewNamespace(&#34;/v1&#34;).
    Namespace(
        beego.NewNamespace(&#34;/shop&#34;).
            Get(&#34;/:id&#34;, func(ctx *context.Context) {
                ctx.Output.Body([]byte(&#34;shopinfo&#34;))
        }),
        beego.NewNamespace(&#34;/order&#34;).
            Get(&#34;/:id&#34;, func(ctx *context.Context) {
                ctx.Output.Body([]byte(&#34;orderinfo&#34;))
        }),
        beego.NewNamespace(&#34;/crm&#34;).
            Get(&#34;/:id&#34;, func(ctx *context.Context) {
                ctx.Output.Body([]byte(&#34;crminfo&#34;))
        }),
    )</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>如何规划项目的路由</h3>
        
  <ul>
  
    <li>简单的应用采用routers/router.go</li>
  
    <li>多模块的采用namespace，然后引用的地方注册</li>
  
  </ul>

  
  <div class="code"><pre>beego.AddNamespce(ns)

|-- beeapi
|-- conf
|   `-- app.conf
|-- controllers
|   `-- default.go
|-- main.go
|-- models
|   `-- object.go
|-- routers
|   `-- router.go
`-- tests
    `-- default_test.go</pre></div>
  

      
      </article>
  
  

      <article>
        <h3>Thank you</h1>
        
          <div class="presenter">
            
  
  <p>
    By Lei Cao
  </p>
  
<p class="link"><a href="http://github.com/lei-cao" target="_blank">http://github.com/lei-cao</a></p>
          </div>
        
      </article>

  </body>
  
</html>
